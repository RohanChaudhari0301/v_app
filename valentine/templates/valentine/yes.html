{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E%E2%9D%A4%3C/text%3E%3C/svg%3E">
    <title>Thank You Valentine</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', Arial, sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at top, #ffe0e9 0%, #ff99c8 40%, #f06595 100%);
            overflow: hidden;
            color: #4a1c40;
        }

        .hearts {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            color: rgba(255, 255, 255, 0.75);
            animation: floatUp 8s linear infinite;
        }

        .heart:nth-child(2) { left: 15%; animation-delay: 1s; }
        .heart:nth-child(3) { left: 35%; animation-delay: 2.5s; }
        .heart:nth-child(4) { left: 60%; animation-delay: 4s; }
        .heart:nth-child(5) { left: 80%; animation-delay: 5.5s; }

        @keyframes floatUp {
            0% { transform: translateY(100vh); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateY(-20vh); opacity: 0; }
        }

        .card {
            position: relative;
            z-index: 1;
            text-align: center;
            background: rgba(255, 255, 255, 0.97);
            padding: 32px 28px 26px;
            border-radius: 26px;
            box-shadow: 0 18px 45px rgba(0, 0, 0, 0.25);
            max-width: 640px;
            width: 92%;
        }

        h1 {
            font-family: 'Great Vibes', cursive;
            color: #d62828;
            margin-bottom: 6px;
            font-size: 46px;
        }

        .subtitle {
            margin-bottom: 20px;
            font-size: 15px;
            color: #7b2d3a;
        }

        p {
            margin-bottom: 16px;
            font-size: 16px;
            color: #4a1c40;
        }

        .video-wrapper {
            margin-top: 10px;
            border-radius: 18px;
            padding: 6px;
            background: radial-gradient(circle at top left, #ffafcc, #ffc8dd);
            box-shadow: 0 14px 30px rgba(0, 0, 0, 0.28);
            max-height: 260px;
            overflow: hidden;
            display: none;
        }

        video {
            width: 100%;
            height: 100%;
            max-height: 248px;
            border-radius: 14px;
            outline: none;
            display: block;
            object-fit: cover;
        }

        .btn-watch {
            margin-top: 10px;
            padding: 10px 22px;
            border-radius: 999px;
            border: none;
            background: #ff4d6d;
            color: #fff;
            font-size: 15px;
            cursor: pointer;
            box-shadow: 0 10px 22px rgba(255, 77, 109, 0.55);
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
        }

        .btn-watch:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 26px rgba(255, 77, 109, 0.65);
            background: #ff1f4d;
        }

        .btn-letter {
            margin-top: 10px;
            padding: 10px 22px;
            border-radius: 999px;
            border: none;
            background: #ffafcc;
            color: #4a1c40;
            font-size: 15px;
            cursor: pointer;
            box-shadow: 0 10px 22px rgba(255, 175, 204, 0.7);
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
            display: inline-block;
            text-decoration: none;
        }

        .btn-letter:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 26px rgba(255, 175, 204, 0.85);
            background: #ffc8dd;
        }

        .note {
            margin-top: 16px;
            font-size: 14px;
            color: #8d3341;
        }

        .back-btn {
            position: absolute;
            top: 14px;
            left: 18px;
            padding: 6px 14px;
            border-radius: 999px;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            color: #d62828;
            font-size: 13px;
            cursor: pointer;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .back-btn:hover {
            background: #fff;
        }
    </style>
</head>
<body>
<div class="hearts">
    <div class="heart">‚ù§</div>
    <div class="heart">‚ù§</div>
    <div class="heart">‚ù§</div>
    <div class="heart">‚ù§</div>
    <div class="heart">‚ù§</div>
</div>

<div class="card">
    <form action="{% url 'home' %}" method="get">
        <button type="submit" class="back-btn">
            ‚Üê Back
        </button>
    </form>

    <h1>Yesss, thank you! üíñ</h1>
    <p class="subtitle">You just made my day (and my Valentine).</p>
    <p>I‚Äôm so happy you said yes. üíï</p>
    <p>There is a little dance and a note just for you.</p>


    <button type="button" class="btn-watch" id="watchButton">
        Checkout my lovely dance üíÉ
    </button>

    <a href="{% url 'letter_page' %}" class="btn-letter">
        There is a lovely note for you
    </a>

    <div class="video-wrapper">
        <video src="{% static 'valentine/video_dance.mp4' %}"
               autoplay
               muted
               loop
               controls>
            Your browser does not support the video tag.
        </video>
    </div>

    <p class="note">P.S. You‚Äôre officially my Valentine now. No take-backs. ü•∞</p>
</div>

<script>
    const watchButton = document.getElementById('watchButton');
    const videoWrapper = document.querySelector('.video-wrapper');
    const videoEl = videoWrapper.querySelector('video');

    watchButton.addEventListener('click', () => {
        // Start playing the video (required by some browsers before PiP)
        videoEl.play().then(() => {
            if (document.pictureInPictureEnabled && !videoEl.disablePictureInPicture) {
                videoEl.requestPictureInPicture().catch(() => {});
            }
        }).catch(() => {});

        // Hide the button so only the PiP window is visible
        watchButton.style.display = 'none';
    });
</script>
</body>
</html>
